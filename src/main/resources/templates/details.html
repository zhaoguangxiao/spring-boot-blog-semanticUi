<!DOCTYPE html>
<!--STATUS OK-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="main/_fragments :: header(~{::title},~{::link},~{::meta})">
    <!--  关键字  -->
    <meta type="keywords" content="博客详情页面"/>
    <!--  描述　-->
    <meta type="description" content="博客详情页面描述"/>
    <title th:text="${blogBean.title}"></title>
    <!--排版css-->
    <link rel="stylesheet" href="../static/css/typo.css" th:href="@{/static/css/typo.css}"/>
    <!--引入动画样式-->
    <link rel="stylesheet" href="../static/css/animate.css" th:href="@{/static/css/animate.css}">
    <!--引入代码高亮css-->
    <link rel="stylesheet" href="../static/css/prism.css" th:href="@{/static/css/prism.css}">
    <!--引入自动生成目录css-->
    <link rel="stylesheet" href="../static/css/tocbot.css" th:href="@{/static/css/tocbot.css}">
</head>
<body>

<!--头部导航-->
<div th:replace="main/_fragments :: menu(1)"></div>


<!--中间内容   ctrl+enter先输入内容然后注释-->
<!--div +tab 快速补全代码-->
<div id="middle-content" class="m-container-small m-padded-tb-big">
    <div class="ui container">
        <div class="ui top attached segment">
            <div class="ui header">
                <div class="ui grid">
                    <div class="eleven wide column">
                        <div class="ui horizontal link list">
                            <div class="item">
                                <img th:src="${blogBean.userBean.avatar}" alt="" class="ui avatar image">
                                <div class="content">
                                    <a href="#" th:href="@{/about}" class="header"
                                       th:text="${blogBean.userBean.nickName}"></a>
                                </div>
                            </div>
                            <div class="item">
                                <i class="calendar icon"></i>[[${#dates.format(blogBean.createTime,'yyyy-MM-dd
                                HH:mm:ss')}]]
                            </div>
                            <div class="item">
                                <i class="eye icon"></i>
                                <span class="views">[[${blogBean.views}]]</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--图片区域-->
            <div class="ui attached segment animated fadeIn">
                <img th:src="${blogBean.firstPicture}" alt="" class="image ui fluid rounded">
            </div>

            <!--内容-->
            <div class="ui attached padded segment">
                <div class="ui right aligned basic segment">
                    <div class="ui label basic orange" th:text="#{archives.blog.label}">
                    </div>
                </div>
                <h2 class="ui center aligned header animated heartBeat" th:text="${blogBean.title}"></h2>
                <br>
                <div id="content" class="js-toc-content typo typo-selection m-padded-left m-padded-tb-large">
                    <div th:utext="${blogBean.content}"></div>
                </div>
                <!--标签-->
                <div class="m-padded-left">
                    <div class="ui basic teal left pointing label" th:each="each : ${blogBean.tagBeans}"
                         th:text="${each.name}"></div>
                </div>

                <!--赞赏功能-->
                <div class="ui center aligned basic segment">
                    <div id="payBtn" class="ui button circular orange basic"
                         th:text="#{archives.blog.label.appreciate}"></div>
                    <br>
                    <div class="ui payButton flowing popup transition hidden">
                        <div class="ui orange basic label">
                            <div class="ui images" style="font-size: inherit;!important;">
                                <div class="image">
                                    <img th:src="@{/static/images/zhifubao.jpg}"
                                         src="../static/images/2017-07-10_59631d2325129.jpg" alt=""
                                         class="ui rounded bordered image" style="width: 120px">
                                    <!--                                    <div>支付宝</div>-->
                                </div>
                                <div class="image">
                                    <img th:src="@{/static/images/wechat.jpg}"
                                         src="../static/images/2017-07-10_59631d2325129.jpg" alt=""
                                         class="ui rounded bordered image" style="width: 120px">
                                    <!--                                    <div>微信</div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!--博客信息-->
            <div class="ui attached positive message">
                <div class="ui middle aligned grid">
                    <div class="eleven wide column">
                        <ui class="list">
                            <li>[[#{detail.context.message}]]:[[${blogBean.userBean.nickName}]]</li>
                            <li>
                                [[#{detail.context.message.create.time}]]:[[${#dates.format(blogBean.createTime,'yyyy-MM-dd
                                HH:mm:ss')}]]
                            </li>
                            <li th:text="#{detail.context.message.test}"></li>
                            <li th:text="#{detail.context.message.label}"></li>
                        </ui>
                    </div>
                    <div class="five wide column">
                        <img th:src="${blogBean.userBean.avatar}" alt=""
                             class="ui right floated rounded bordered image" style="width: 120px">
                    </div>
                </div>
            </div>


            <!--留言区域-->
            <div class="ui attached segment">
                <!--留言列表-->
                <div id="command-container" th:fragment="comment-list" class="ui teal comments">
                    <h3 class="ui dividing header">Comments</h3>
                    <div class="comment" th:each="each,iterStat : ${commentBeans}">
                        <a class="avatar">
                            <img src="../static/images/box.png" th:src="@{${each.commentator.avatar}}">
                        </a>
                        <div class="content">
                            <a class="author" th:text="${each.commentator.nickName}"></a>
                            <div class="metadata">
                                <span class="date">[[${#dates.format(each.createTime,'yyyy-MM-dd HH:mm:ss')}]]</span>
                                <span th:text="|#${iterStat.count}楼|"></span>
                            </div>
                            <div class="text" th:text="${each.content}"></div>
                            <div class="actions" th:if="${session.userEntity != null}">
                                <a class="reply" onclick="reply(this)"
                                   th:attr="data-comment-id=${each.id},data-comment-nickname=${each.commentator.nickName}">[[#{detail.context.comment.message.test}]]</a>
                            </div>
                        </div>
                        <div class="comments" th:if="${#arrays.length(each.replyComments)}>0">
                            <div class="comment" th:each="each : ${each.replyComments}">
                                <a class="avatar">
                                    <img th:src="@{${each.commentator.avatar}}">
                                </a>
                                <div class="content">
                                    <a class="author">
                                        [[${each.commentator.nickName}]]&nbsp;<span style="color: #00b5ad;!important;"
                                                                                    th:text="|@ ${each.parentComment.commentator.nickName}|"></span>
                                    </a>
                                    <div class="metadata">
                                        <span class="date">[[${#dates.format(each.createTime,'yyyy-MM-dd HH:mm:ss')}]]</span>
                                    </div>
                                    <div class="text" th:text="${each.content}"></div>
                                    <div class="actions" th:if="${session.userEntity != null}">
                                        <a class="reply" onclick="reply(this)"
                                           th:attr="data-comment-id=${each.id},data-comment-nickname=${each.commentator.nickName}">[[#{detail.context.comment.message.test}]]</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div>
                    <!--留言表单-->
                    <div id="comment-form" class="ui reply form" th:if="${session.userEntity != null}">
                        <input type="hidden" name="blogBean.id" th:value="${blogBean.id}">
                        <input type="hidden" name="parentComment.id" value="-1">
                        <div>
                            <div class="field">
                                <textarea name="content" placeholder="请输入回复内容..."></textarea>
                            </div>
                            <div class="fields m-mobile-width m-margin-top-small">
                                <div class="item">
                                    <div class="content">
                                        <div class="header"><img style="margin-top: 11px;" class="ui avatar image"
                                                                 th:src="${session.userEntity.avatar}"></div>
                                    </div>
                                </div>

                                <div class="field m-mobile-width m-margin-top-small">
                                    <div class="ui left icon input">
                                        <i class="user icon"></i>
                                        <input type="text" placeholder="姓名" name="nickName" readonly=""
                                               th:value="${session.userEntity.nickName}">
                                    </div>
                                </div>
                                <div class="field m-mobile-width m-margin-top-small">
                                    <div class="ui left icon input">
                                        <i class="mail icon"></i>
                                        <input type="text" placeholder="邮箱" name="email" readonly=""
                                               th:value="${session.userEntity.email}">
                                    </div>
                                </div>
                                <div class="field m-mobile-width m-margin-top-small">
                                    <button type="button" id="comment-btn-sub" class="ui teal m-mobile-width button">
                                        <i class="edit icon"></i>
                                        立即提交
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!--显示错误内容-->
                        <div class="field">
                            <div class="ui error message"></div>
                        </div>
                    </div>
                    <div class="ui bottom attached warning message" th:if="${session.userEntity == null}">
                        <i class="icon help"></i>
                        [[#{detail.context.comment}]] <a href="javascript:void(0)">
                        <i class="qq icon"></i></a>
                        <a href="javascript:void(0)" onclick="githubLogin()">
                            <i class="github icon"></i>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!--用户个人信息部分-->
<div th:replace="main/personal_fragments :: user_personal"></div>

<div id="toolbar-list" class="m-padded-tb-max m-fixed m-right-button" style="display: none;">
    <div class="ui vertical icon buttons">
        <button id="catalog" class="ui teal button" type="button" th:text="#{detail.context.comment.Catalog}"></button>
        <a href="#command-container" class="ui teal button" th:text="#{detail.context.comment.Leaving}"></a>
        <button class="ui button click-wechat"><i class="weixin icon"></i></button>
        <div id="toTop-div" class="ui button">
            <i class="chevron up icon"></i>
        </div>
    </div>
</div>


<!--目录内容-->
<div class="ui catalog-click flowing popup transition hidden" style=" width: 250px;!important;">
    <ol class="js-toc">
    </ol>
</div>
<!--微信二维码-->
<div id="qrcode" class="ui share-wechat flowing popup transition hidden m-padded-mini" style="width: 130px!important;">
    <!--<img src="static/images/2017-07-10_59631d2325129.jpg" alt=""  class="ui rounded image">-->
</div>


<!--尾部-->
<div th:replace="main/_fragments :: footer"></div>


<!--引入js-->
<th:block th:replace="main/_fragments :: script"></th:block>

<!--引入代码高亮js-->
<script src="../static/js/prism.js" th:src="@{/static/js/prism.js}"></script>
<!--引入自动生成目录js-->
<script src="../static/js/tocbot.min.js" th:src="@{/static/js/tocbot.min.js}"></script>
<!--引入生成二维码js-->
<script src="../static/js/qrcode.min.js" th:src="@{/static/js/qrcode.min.js}"></script>
<!--cookiejs-->
<script type="text/javascript" th:src="@{/static/js/jquery.cookie.js}"></script>
<!--加密js-->
<script th:src="@{/static/js/jsencrypt.min.js}"></script>

<script language='javascript' th:inline="javascript">
    /*<![CDATA[*/
    var qrcodeurl = [[${#httpServletRequest.getRequestURL()}]];
    /*]]>*/
    var blogId = [[${blogBean.id}]];
</script>
<!--引入详情页面js-->
<script th:src="@{/static/js/blog_details_min.js}"></script>

</body>
</html>